Text Snippet Sharing Service
Pastebin のように、ユーザーがプレーンテキストやコードスニペットを共有できるオンラインコード＆テキストスニペット共有サービスを開発します。このプラットフォームは、ユーザーアカウントの必要がなく、簡単にテキストとコードを共有できるようにする必要があります。

ユーザーは、テキストエリアにテキストやコードを貼り付け、共有コンテンツの一意の URL が生成される機能を持たせる必要があります。この URL は、他の人とコンテンツを共有するために使用できます。一般的なプログラミング言語の構文のハイライトがコア機能として必要です。

機能要件

1. スニペットのアップロード
   ユーザーはテキストエリアにテキストやコードを貼り付けます。
   可読性を向上させるために、構文ハイライトを適用したいプログラミング言語を選択できます。
   ユーザーが内容を送信すると、スニペット用の一意の URL が生成されます。URL は一意の文字列に基づいています。フォーマットは、https://{domain}/{path}/{unique-string} のような形で、URL のパースには、例えば parse_url のようなライブラリを活用することが可能です。

2. スニペットの閲覧
   一意の URL にアクセスしてスニペットを閲覧できます。
   コードの場合、提出時に選択した言語に基づいてシンタックスハイライトを適用します。

3. スニペットの有効期限設定
   スニペットの有効期限（例：10 分、1 時間、1 日、永続）を設定するオプションを持ちます。
   期限切れになったスニペットは自動的に削除され、「Expired Snippet」というメッセージを表示します。

4. データストレージ
   バックエンドへ送信される全てのユーザーからの入力は、厳格に検証とサニタイズが行われる必要があります。
   SQL インジェクションを防ぐために、スニペットは安全に保存します。

5. フロントエンドインターフェース
   シンプルで使いやすいインターフェースを持ち、テキストまたはコードの送信を容易にします。
   スニペットが成功して送信されると、その内容にアクセスできる一意の URL が生成され、ユーザーに表示されます。

6. エラーハンドリング
   大量のテキストやコード、またはサポートされていない文字が送信された場合でも、適切に処理し、エラーメッセージを表示します。

技術要件

ウェブインターフェース
フロントエンドのデザインには HTML/CSS を使用します。
ダイナミックなインタラクションには JavaScript を利用します。
テキストやコード入力に monaco エディタの使用を検討します。

バックエンド
スニペットの送信、URL の生成、スニペットの提供を処理するために、静的型付けが可能なサーバサイドの OOP 言語、例えば PHP 8.0 を使用します。
一意の URL 生成には、hash()のようなハッシュ関数を利用します。

データベース
提出されたスニペット、それらの URL、ハイライト用のプログラム言語、送信時刻、有効期限を記録するために MySQL を使用します。

ミドルウェア
必要なすべてのデータベーススキーマをセットアップするためのマイグレーション管理システムを使用します。
データベースとのインタラクションには MySQLWrapper クラスを採用します。

非機能要件

デプロイメント
サービスは、ユーザーが簡単に記憶できるドメインやサブドメインで公開する必要があります。
サービスが常に利用可能で、サービスが利用できない時間が極力少ない状態を保つ必要があります。
エンジニアが迅速に開発とデプロイを行えるように、リポジトリ同期の Git コマンドを実行するだけでコードの更新と同期がライブで行える必要があります。

パフォーマンス
スニペットを効率よく取得し、ユーザーが迅速に閲覧できるようにする必要があります。
ページの読み込みが極端に遅くなることなく、速やかに構文ハイライトを表示できるようにします。

スケーラビリティ
大量のスニペットが同時に送信されても、それらをスムーズに処理できるシステムを確立する必要があります。

セキュリティ
スニペットは安全に保存され、不正アクセスを防ぐ仕組みを整える必要があります。
安全な接続とデータの暗号化を保証するために、HTTPS を採用する必要があります。

---

monaco エディターをブラウザに貼っつける
↓
スニペットの送信ボタン,送信内容を console に表示できるようにする
↓
monaco editor の input どうやって取得するんだ?
gpt に聞く
doc を見る->そもそも doc の見方を調べる
続き
どうやって取得するかは gpt に聞いた。
↓

Monaco Editor でユーザーが入力したコードを取得するには、editor.getValue()メソッドを使用します。このメソッドは、現在のエディターの内容を取得します。

この例では、Monaco Editor でユーザーが入力したコードを取得するために、editor.getValue()メソッドを使っています。ユーザーが入力したコードは userCode 変数に格納され、それを使って任意の処理を行うことができます。

```javascript
// Monaco Editorを初期化する
var editor = monaco.editor.create(document.getElementById("editor"), {
  value: 'console.log("Hello, Monaco Editor!");',
  language: "javascript",
  theme: "vs-dark", // テーマを選択する（例：'vs', 'vs-dark', 'hc-black'など）
});

// sendボタンの要素を取得する
var sendButton = document.getElementById("sendButton");

// sendボタンがクリックされた時の処理を追加する
sendButton.addEventListener("click", function () {
  // ユーザーが入力したコードを取得する
  var userCode = editor.getValue();
  // userCodeを使って何か処理を行う（例：サーバーに送信する、ローカルで実行するなど）
  console.log("User code:", userCode);
});
```

続き
value 取得できたから、php に送信してみる。
そもそもなぜ処理をサーバーに送信しなきゃいけないんだっけ?js と db だけだとダメなの?gpt に聞いてみる

f データを送信する
b データを検証して受け取る
bDB に追加する(後からユーザーがスニペット一覧を見れるようにするため、スニペットの有効期限を設定して期限が過ぎたら expire と表示させるため)
bURL を生成して返す
fURL を受け取る

続き
これらのデータのやり取りを見て、send,receive 関数を作るのかとかどうやってデータのやり取りを書くのかとかを調べる
m0

client
input を送信する
server
受け取る、検証、DB に追加、url を生成、それを送信
client
url を表示する

今
ちゃんとクライアントのデータをサーバーで取得できた。
次はそのデータを検証して DB に入れる。
ってことは検証のコードと DB のスキーマを考える。
今のゴール
node と DB を繋げて、データを入れる
次のゴール
データを入れたら、成功しましたというメッセージを client に表示する

一旦 push する。通信ができたコードを。そして db に入る。
